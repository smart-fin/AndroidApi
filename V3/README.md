# API для взаимодействия с Мобильным терминалом 2can

API предназначено для интеграции вашего мобильного приложения и Мобильного терминала 2can

## Основной сценарий использования

1. Ваше мобильное приложение передает Мобильному терминалу 2can назначение и сумму платежа
2. Мобильный терминал 2can проводит операцию с платежной картой
3. Мобильный терминал 2can возвращает результат операции и передает управление обратно вашему приложению

## Что здесь?

Здесь находится исходный код приложения, демонстрирующий возможности API.

Если на вашем телефоне установлен и активирован
Мобильный терминал 2can, то демо-приложение вызовет его для проведения операции. 

## Версии Мобильного терминала 2can, поддерживающие данное API

- 2can Касса https://play.google.com/store/apps/details?id=ru.toucan.ecommerce

## Контакты и ресурсы

- Сайт проекта: http://www.2can.ru
- Адрес службы поддержки: android-support@smart-fin.ru

## Описание API

### 1. ru.toucan.OPEN 
Проверка оборудования
Проверяет наличие подключенного ридера к мобильному терминалу. 
 
### 2. ru.toucan.CLOSE
Закрытие приложения
После проведения платежа по карте существует возможность закрытия мобильного терминала с целью уменьшения потребления ресурсов устройства.
 
### 3. ru.toucan.PAYMENT
Оплата картой

### 4. ru.toucan.CASH_PAYMENT
Оплата наличными

### 5. ru.toucan.VIEW_PAYMENT
Просмотр платежа

### 6. ru.toucan.CANCEL_PAYMENT
Отмена платежа по платежной карте
Если происходит отмена платежа, то система вызывает метод отмены платежа, передавая во входных параметрах сумму, которая была указана для списания с карты, код RRN операции, по которой совершается отмена. Приложение в ответ возвращает результат выполнения функции или текст ошибки (если нужно).

### 7. ru.toucan.RETURN_PAYMENT
Возврат платежа по платежной карте
При возврате платежа система вызывает метод возврата платежа, передавая во входном параметре сумму к возврату на карту, код RRN операции, по которой совершается возврат. Приложение в ответ возвращает результат выполнения функции, маскированный номер считанной карты, другие параметры сформированной транзакции или текст ошибки (если нужно)

### 8. ru.toucan.SETTLEMENT
Получение итогов дня по картам
Операция сверки итогов, как правило, выполняется при закрытии кассовой смены. В случае, если используется «Касса.Мобильная», самостоятельно реализующая печать чека – выполняет печать чека. Иначе же, если используется «Мобильный терминал» и печать чека осуществляется на отдельно подключенном к системе фискальном регистраторе, метод возвращает текст слип чека для печати.   

### 9. ru.toucan.GET_PARAMETERS
Получение списка настраиваемых параметров 
Данный метод должен предоставлять возможность стороннему мобильному приложению получить список обязательных для всех предоставляемых методов входных параметров. Возвращает XML-строку, описывающую данные параметры.
 
